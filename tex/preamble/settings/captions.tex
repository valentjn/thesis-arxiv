% ======================================================================
% Float Captions
% ======================================================================

% change font size for captions, add horizontal rule
\DeclareCaptionFormat{mycaptionformat}{%
  \small\@hangfrom{#1#2}%
  \advance\caption@parindent\hangindent
  \advance\caption@hangindent\hangindent
  \caption@@par#3\par%
}

\newcommand*{\formatcaption}[1]{%
  \sffamily\bfseries\fontsize{9.5}{12}\selectfont%
  \textls*{\textcolor{mittelblau}{\MakeUppercase{#1}}}%
}

\newcommand*{\formatsubcaption}[1]{%
  \sffamily\bfseries\fontsize{8.8}{11}\selectfont%
  \textls*{\textcolor{mittelblau}{\MakeUppercase{#1}}}%
}

% change appearance of caption label
\DeclareCaptionLabelFormat{mycaptionlabelformat}{%
  \formatcaption{#1 #2}%
}

% special format for unnumbered figures (e.g., cover figure)
\DeclareCaptionLabelFormat{mycaptionlabelformatunnumbered}{%
  \formatcaption{#1}%
}

% set caption format
\captionsetup{
  % use custom format
  format=mycaptionformat,
  % use custom label format
  labelformat=mycaptionlabelformat,
  % separate number and caption with \quad
  labelsep=quad,
}

% don't indent caption text in SCfigure (figures with side caption)
\DeclareCaptionFormat{mysidecaptionformat}{\small#1#2\\#3\par}
\AtBeginEnvironment{SCfigure}{\captionsetup{format=mysidecaptionformat}}
\AtBeginEnvironment{SCtable}{\captionsetup{format=mysidecaptionformat}}

% use maximum space for SCfigure captions (sidecap's default is that
% the caption can only be as wide as the figure itself)
\renewcommand*{\sidecaptionrelwidth}{50}

% change font size for sub-captions
\DeclareCaptionFormat{mysubcaptionformat}{%
  \fontsize{10}{12}\selectfont\@hangfrom{#1#2}%
  \advance\caption@parindent\hangindent
  \advance\caption@hangindent\hangindent
  \caption@@par#3\par%
}

% change appearance of sub-caption label
\DeclareCaptionLabelFormat{mysubcaptionlabelformat}{%
  \formatsubcaption{#2}%
}

% set sub-caption format
\captionsetup[sub]{
  % use custom format
  format=mysubcaptionformat,
  % use custom label format
  labelformat=mysubcaptionlabelformat,
  % separate number and caption with \quad
  labelsep=quad,
}

% use uppercase letters to reference sub-figures
\renewcommand*{\thesubfigure}{\Alph{subfigure}}
